<div class="background-wrapper absolute top-0 left-0 h-screen w-full z-10 overflow-hidden">
  <img class="background-image h-screen w-full object-cover scale-125" src="/images/background.png" alt="Halloween Background">
</div>

<style>
  .background-wrapper {
    mask-image: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 50%, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%);
  }
  .background-image {
    will-change: transform;
  }
</style>

<script>
  import gsap from 'gsap'
  import { ScrollTrigger } from 'gsap/ScrollTrigger'
  document.addEventListener("astro:page-load", () => {
    gsap.registerPlugin(ScrollTrigger)

    gsap.to(".background-wrapper", {
      yPercent: -20,
      ease: "none",
      scrollTrigger: {
        trigger: ".background-wrapper",
        start: "top top",
        end: "bottom top",
        scrub: 4
      }
    })

    gsap.fromTo(
      ".background-wrapper",
      { opacity: 0, scale: 1.1 },
      {
        opacity: 1,
        scale: 1,
        duration: 3,
        ease: "power2.out",
        onComplete: () => {
          // Después de la animación inicial, aplicar el efecto parallax
          gsap.to(".background-image", {
            yPercent: -20,
            ease: "none",
            scrollTrigger: {
              trigger: ".background-wrapper",
              start: "top top",
              end: "bottom top",
              scrub: true
            }
          })
        }
      }
    )
  })
</script>
